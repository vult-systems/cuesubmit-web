@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/*
 * Semantic Token System
 * ---------------------
 * All colors are defined as semantic tokens.
 * Components must use tokens, never hard-coded colors.
 *
 * Surface hierarchy:
 *   background < surface < surface-muted < surface-raised
 *
 * Text hierarchy:
 *   text-primary (85-90%) > text-secondary (60-70%) > text-muted (40-50%)
 */

@theme inline {
  /* Core semantic tokens */
  --color-background: var(--background);
  --color-surface: var(--surface);
  --color-surface-muted: var(--surface-muted);
  --color-surface-raised: var(--surface-raised);
  --color-border: var(--border);
  --color-border-muted: var(--border-muted);

  /* Text tokens */
  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-muted: var(--text-muted);

  /* Accent tokens */
  --color-accent: var(--accent);
  --color-accent-muted: var(--accent-muted);
  --color-accent-subtle: var(--accent-subtle);
  --color-focus: var(--focus);

  /* Status tokens */
  --color-success: var(--success);
  --color-success-muted: var(--success-muted);
  --color-warning: var(--warning);
  --color-warning-muted: var(--warning-muted);
  --color-danger: var(--danger);
  --color-danger-muted: var(--danger-muted);

  /* Section accent tokens (for form sections) */
  --color-section-cool: var(--section-cool);
  --color-section-cool-muted: var(--section-cool-muted);
  --color-section-cool-bg: var(--section-cool-bg);
  --color-section-cool-border: var(--section-cool-border);
  --color-section-warm: var(--section-warm);
  --color-section-warm-muted: var(--section-warm-muted);
  --color-section-warm-bg: var(--section-warm-bg);
  --color-section-warm-border: var(--section-warm-border);

  /* Legacy compatibility (shadcn components) */
  --color-foreground: var(--text-primary);
  --color-card: var(--surface);
  --color-card-foreground: var(--text-primary);
  --color-popover: var(--surface-raised);
  --color-popover-foreground: var(--text-primary);
  --color-primary: var(--accent);
  --color-primary-foreground: var(--accent-foreground);
  --color-secondary: var(--surface-muted);
  --color-secondary-foreground: var(--text-primary);
  --color-muted: var(--surface-muted);
  --color-muted-foreground: var(--text-muted);
  --color-accent-foreground: var(--text-primary);
  --color-destructive: var(--danger);
  --color-input: var(--border);
  --color-ring: var(--focus);

  /* Fonts - using CSS variable from layout.tsx */
  --font-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;

  /* Radius */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

/* ============================================
   LIGHT MODE
   ============================================ */
:root {
  --radius: 0.375rem;

  /* Surface hierarchy (light â†’ dark) */
  --background: #fafafa;
  --surface: #ffffff;
  --surface-muted: #f5f5f5;
  --surface-raised: #ffffff;

  /* Borders */
  --border: #e5e5e5;
  --border-muted: #ebebeb;

  /* Text hierarchy */
  --text-primary: #171717;
  --text-secondary: #525252;
  --text-muted: #a3a3a3;

  /* Accent: Cardinal Red */
  --accent: #8C1515;
  --accent-muted: #a33a3a;
  --accent-subtle: rgba(140, 21, 21, 0.08);
  --accent-foreground: #ffffff;
  --focus: #8C1515;

  /* Status colors */
  --success: #16a34a;
  --success-muted: rgba(22, 163, 74, 0.12);
  --warning: #ca8a04;
  --warning-muted: rgba(202, 138, 4, 0.12);
  --danger: #dc2626;
  --danger-muted: rgba(220, 38, 38, 0.12);

  /* Section accents */
  --section-cool: #2d6a7a;
  --section-cool-muted: #4a8a9a;
  --section-cool-bg: rgba(45, 106, 122, 0.06);
  --section-cool-border: rgba(45, 106, 122, 0.15);
  --section-warm: #8a6040;
  --section-warm-muted: #a07850;
  --section-warm-bg: rgba(138, 96, 64, 0.06);
  --section-warm-border: rgba(138, 96, 64, 0.15);
}

/* ============================================
   DARK MODE - x.ai / Grok inspired
   ============================================ */
.dark {
  /* Surface hierarchy - true black base */
  --background: #000000;
  --surface: #0a0a0a;
  --surface-muted: #111111;
  --surface-raised: #161616;

  /* Borders - very subtle */
  --border: #1f1f1f;
  --border-muted: #181818;

  /* Text hierarchy - high contrast */
  --text-primary: #fafafa;
  --text-secondary: #a1a1a1;
  --text-muted: #666666;

  /* Accent: Clean white/blue glow */
  --accent: #ffffff;
  --accent-muted: #e5e5e5;
  --accent-subtle: rgba(255, 255, 255, 0.06);
  --accent-foreground: #000000;
  --focus: rgba(255, 255, 255, 0.5);

  /* Status colors (muted for dark mode) */
  --success: #4ade80;
  --success-muted: rgba(74, 222, 128, 0.12);
  --warning: #fbbf24;
  --warning-muted: rgba(251, 191, 36, 0.12);
  --danger: #f87171;
  --danger-muted: rgba(248, 113, 113, 0.12);

  /* Section accents (subtle) */
  --section-cool: #60a5fa;
  --section-cool-muted: #3b82f6;
  --section-cool-bg: rgba(96, 165, 250, 0.08);
  --section-cool-border: rgba(96, 165, 250, 0.15);
  --section-warm: #fbbf24;
  --section-warm-muted: #f59e0b;
  --section-warm-bg: rgba(251, 191, 36, 0.08);
  --section-warm-border: rgba(251, 191, 36, 0.15);
}

/* ============================================
   BASE STYLES
   ============================================ */
@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-text-primary antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Focus ring utility - subtle glow */
  .focus-ring {
    @apply outline-none ring-1 ring-focus ring-offset-1 ring-offset-background;
  }

  /* Smooth transitions globally */
  a, button, input, select, textarea {
    @apply transition-all duration-200 ease-out;
  }

  /* Hide number input spinners */
  input[type="number"]::-webkit-outer-spin-button,
  input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  input[type="number"] {
    -moz-appearance: textfield;
    appearance: textfield;
  }

  /* Grid items stretch to fill cells */
  .grid > * {
    justify-self: stretch;
    align-self: stretch;
  }

  /* Ensure all form controls stretch */
  .grid input,
  .grid select,
  .grid [data-slot="select-trigger"] {
    width: 100%;
  }
}

/* ============================================
   COMPONENT UTILITIES
   ============================================ */
@layer components {
  /* Surface variants */
  .surface {
    @apply bg-surface text-text-primary;
  }

  .surface-muted {
    @apply bg-surface-muted text-text-primary;
  }

  .surface-raised {
    @apply bg-surface-raised text-text-primary;
  }

  /* Input base styles */
  .input-base {
    @apply bg-surface border-border text-text-primary;
    @apply placeholder:text-text-muted;
    @apply hover:border-border focus:border-accent focus:ring-1 focus:ring-accent/30;
    @apply transition-colors;
  }

  /* Card base styles */
  .card-base {
    @apply bg-surface border border-border rounded-lg;
  }
}

/* ============================================
   SELECT/DROPDOWN STYLING
   ============================================ */
[data-slot="select-content"] {
  background-color: var(--surface) !important;
  opacity: 1 !important;
  backdrop-filter: none !important;
}

[data-slot="dropdown-menu-content"] {
  background-color: var(--surface) !important;
  opacity: 1 !important;
  backdrop-filter: none !important;
}

/* ============================================
   x.ai STYLE UTILITIES & ANIMATIONS
   ============================================ */
@layer utilities {
  /* Glow effect on hover */
  .glow-hover {
    @apply transition-all duration-500 ease-out;
  }
  
  .glow-hover:hover {
    box-shadow: 0 0 30px rgba(255, 255, 255, 0.08), 0 0 60px rgba(255, 255, 255, 0.04);
  }

  /* Subtle text glow */
  .text-glow {
    text-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
  }

  /* Glass effect */
  .glass {
    @apply bg-white/60 dark:bg-surface/40 backdrop-blur-2xl border border-neutral-200/50 dark:border-white/5;
  }

  /* ========== KEYFRAME ANIMATIONS ========== */
  
  /* Fade up */
  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Fade in */
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Scale in */
  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Slide in from right */
  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Slide in from left */
  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Subtle pulse */
  @keyframes subtlePulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }

  /* Float */
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
  }

  /* Shimmer effect */
  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  /* Gradient shift */
  @keyframes gradientShift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  @keyframes gauge-draw {
    to { stroke-dashoffset: 0; }
  }

  @keyframes fade-in {
    to { opacity: 1; }
  }

  @keyframes sankey-flow-in {
    from { opacity: 0; transform: translateX(-8px); }
    to { opacity: 1; transform: translateX(0); }
  }

  @keyframes gauge-breathe {
    0%, 100% { opacity: 0.08; }
    50% { opacity: 0.2; }
  }

  @keyframes sankey-node-pulse {
    0%, 100% { opacity: 0.9; }
    50% { opacity: 1; }
  }

  /* ========== ANIMATION CLASSES ========== */
  
  .animate-fade-up {
    animation: fadeUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .animate-fade-in {
    animation: fadeIn 0.5s ease-out forwards;
  }

  .animate-scale-in {
    animation: scaleIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .animate-slide-in-right {
    animation: slideInRight 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .animate-slide-in-left {
    animation: slideInLeft 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .animate-subtle-pulse {
    animation: subtlePulse 2s ease-in-out infinite;
  }

  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  .animate-shimmer {
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }

  /* Staggered animation delays */
  .animate-delay-100 { animation-delay: 100ms; }
  .animate-delay-200 { animation-delay: 200ms; }
  .animate-delay-300 { animation-delay: 300ms; }
  .animate-delay-400 { animation-delay: 400ms; }
  .animate-delay-500 { animation-delay: 500ms; }

  /* ========== HOVER EFFECTS ========== */
  
  /* Subtle scale on hover */
  .hover-lift {
    @apply transition-all duration-300 ease-out;
  }
  
  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.3);
  }

  /* Smooth border glow */
  .border-glow {
    @apply transition-all duration-500 ease-out;
  }
  
  .dark .border-glow:hover {
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.1), 
                0 0 20px rgba(255, 255, 255, 0.05),
                0 0 40px rgba(255, 255, 255, 0.02);
  }

  /* Interactive card */
  .card-interactive {
    @apply transition-all duration-300 ease-out cursor-pointer;
  }

  .card-interactive:hover {
    @apply bg-surface-muted/50;
    transform: translateY(-1px);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
  }

  /* Button shine effect */
  .btn-shine {
    position: relative;
    overflow: hidden;
  }

  .btn-shine::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.5s ease;
  }

  .btn-shine:hover::after {
    left: 100%;
  }

  /* Focus glow */
  .focus-glow:focus-visible {
    box-shadow: 0 0 0 2px var(--background), 0 0 0 4px rgba(255, 255, 255, 0.2);
  }

  /* Gradient text */
  .text-gradient {
    background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Animated gradient background */
  .bg-gradient-animated {
    background: linear-gradient(-45deg, #000, #111, #0a0a0a, #050505);
    background-size: 400% 400%;
    animation: gradientShift 15s ease infinite;
  }
}

/* ============================================
   X-STYLE TYPOGRAPHY
   ============================================ */

/* Display/Header font - tighter, bolder */
h1, h2, h3, h4, h5, h6,
.font-display {
  letter-spacing: -0.025em;
}

h1 {
  letter-spacing: -0.035em;
  font-weight: 700;
}

h2 {
  letter-spacing: -0.03em;
  font-weight: 600;
}

h3 {
  letter-spacing: -0.025em;
  font-weight: 600;
}
